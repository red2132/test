public class UploadResultMessageBuilder {

    public static String build(Object resultObject) {
        List<String> failed = new ArrayList<>();

        for (Field field : resultObject.getClass().getDeclaredFields()) {
            if (field.getType() != boolean.class && field.getType() != Boolean.class) {
                continue;
            }

            UploadResultLabel label = field.getAnnotation(UploadResultLabel.class);
            if (label == null) {
                continue; // 업로드 결과 필드가 아니면 스킵
            }

            field.setAccessible(true);
            try {
                boolean value = (boolean) field.get(resultObject);
                if (!value) {
                    failed.add(label.value());
                }
            } catch (IllegalAccessException e) {
                throw new RuntimeException(e);
            }
        }

        if (failed.isEmpty()) {
            return "업로드 성공";
        }

        return String.join(" ", failed) + " 업로드 실패";
    }
}
